parted -s /dev/sda mklabel gpt; parted -s /dev/sda mkpart primary fat32 1MiB 513MiB; parted -s /dev/sda set 1 esp on; parted -s /dev/sda mkpart primary ext4 513MiB 100%; mkfs.fat -F32 /dev/sda1; mkfs.ext4 /dev/sda2; mount /dev/sda2 /mnt; mkdir -p /mnt/boot/efi; mount /dev/sda1 /mnt/boot/efi; pacstrap /mnt base base-devel linux linux-firmware; genfstab -U /mnt >> /mnt/etc/fstab; arch-chroot /mnt bash -c "ln -sf /usr/share/zoneinfo/Europe/Moscow /etc/localtime; hwclock --systohc; sed -i 's/#en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen; locale-gen; echo 'LANG=en_US.UTF-8' > /etc/locale.conf; echo 'arch-awesome' > /etc/hostname; echo -e '127.0.0.1\tlocalhost\n::1\t\tlocalhost\n127.0.1.1\tarch-awesome.localdomain\tarch-awesome' >> /etc/hosts; pacman -S --noconfirm grub efibootmgr networkmanager sudo xorg-server xorg-xinit awesome lightdm lightdm-gtk-greeter alacritty firefox; grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB; grub-mkconfig -o /boot/grub/grub.cfg; systemctl enable NetworkManager lightdm; passwd; useradd -m -G wheel -s /bin/bash user; echo 'user:password' | chpasswd; sed -i 's/# %wheel ALL=(ALL:ALL) ALL/%wheel ALL=(ALL:ALL) ALL/' /etc/sudoers; echo 'exec awesome' > /home/user/.xinitrc; chown user:user /home/user/.xinitrc"; umount -R /mnt; reboot
